for ff in ~/Downloads/Atmel.*.atpack; do f=$(basename "$ff"); d=$(sed -E 's/Atmel\.(.*)_DFP.*/\1/' <<<"$f"); v=$(sed -E 's/Atmel\..*_DFP\.(.*)\.atpack/\1/' <<<"$f"); mkdir -v "$d" tmp; cp LICENSE "$d/" -v; unzip "$ff" -d tmp/; find tmp -iname '*.atdf' | while read at; do sd=$(sed -E 's|tmp/((.*)/)?atdf/.*|\2|' <<<"$at"); mkdir -pv "$d/$sd"; cp "$at" "$d/$sd/" -v; echo "$v" > "$d/.version"; done; git add "$d"; git commit -m "feat: add Atmel $d Series ($v)"; rm tmp -rf; done
